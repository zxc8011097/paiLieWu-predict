<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ’åˆ—ä¸‰Â·æ’åˆ—äº” æ™ºèƒ½åˆ†ææ¨è</title>
    <!-- å¼•å…¥å­—ä½“å’Œå›¾æ ‡åº“ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- å¼•å…¥ ECharts -->
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        /* å¤´éƒ¨ */
        .header {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            border-radius: 30px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        .header h1 {
            font-size: 2.5em;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }
        
        .header p {
            color: #666;
            font-size: 1.1em;
        }
        
        .update-time {
            display: inline-block;
            background: #f0f0f0;
            padding: 8px 20px;
            border-radius: 50px;
            font-size: 0.9em;
            color: #555;
            margin-top: 10px;
        }
        
        /* æœ€æ–°å¼€å¥–å¡ç‰‡ */
        .latest-card {
            background: white;
            border-radius: 30px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
        }
        
        .section-title {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.5em;
            margin-bottom: 20px;
            color: #333;
        }
        
        .section-title i {
            color: #667eea;
        }
        
        .latest-numbers {
            display: flex;
            gap: 40px;
            flex-wrap: wrap;
        }
        
        .lottery-box {
            flex: 1;
            min-width: 300px;
        }
        
        .lottery-box h3 {
            color: #666;
            margin-bottom: 15px;
            font-size: 1.2em;
        }
        
        .number-display {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .ball {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8em;
            font-weight: bold;
            color: white;
            background: linear-gradient(135deg, #667eea, #764ba2);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }
        
        .ball.pl5 {
            background: linear-gradient(135deg, #f093fb, #f5576c);
        }
        
        .meta-info {
            color: #888;
            font-size: 0.9em;
            display: flex;
            gap: 20px;
        }
        
        /* å†å²è®°å½•è¡¨æ ¼ */
        .history-card {
            background: white;
            border-radius: 30px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
        }
        
        .table-container {
            overflow-x: auto;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th {
            background: #f8f9fa;
            padding: 15px;
            text-align: center;
            font-weight: 600;
            color: #555;
        }
        
        td {
            padding: 12px 15px;
            text-align: center;
            border-bottom: 1px solid #eee;
        }
        
        .history-number {
            font-family: monospace;
            font-size: 1.2em;
            font-weight: 600;
            color: #333;
        }
        
        .history-number span {
            display: inline-block;
            width: 30px;
            height: 30px;
            line-height: 30px;
            text-align: center;
            background: #f0f0f0;
            border-radius: 50%;
            margin: 0 2px;
            font-size: 0.9em;
        }
        
        .pagination {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }
        
        .page-btn {
            padding: 8px 15px;
            border: 1px solid #ddd;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .page-btn:hover {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
        
        .page-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
        
        /* å›¾è¡¨åŒºåŸŸ */
        .charts-card {
            background: white;
            border-radius: 30px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
        }
        
        .charts-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .chart-container {
            height: 300px;
            width: 100%;
        }
        
        /* æ¨èåŒºåŸŸ */
        .recommend-card {
            background: white;
            border-radius: 30px;
            padding: 30px;
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
        }
        
        .recommend-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .generate-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 50px;
            font-size: 1.1em;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }
        
        .recommend-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }
        
        .recommend-box {
            background: #f8f9fa;
            border-radius: 20px;
            padding: 20px;
        }
        
        .recommend-box h3 {
            color: #555;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .recommend-numbers {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .recommend-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: white;
            padding: 15px;
            border-radius: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .rec-number {
            font-family: monospace;
            font-size: 1.5em;
            font-weight: bold;
            color: #333;
        }
        
        .rec-analysis {
            color: #888;
            font-size: 0.9em;
        }
        
        .badge {
            background: #e8f0fe;
            color: #667eea;
            padding: 5px 12px;
            border-radius: 50px;
            font-size: 0.85em;
        }
        
        .footer {
            text-align: center;
            color: rgba(255,255,255,0.8);
            margin-top: 30px;
            font-size: 0.9em;
        }
        
        @media (max-width: 768px) {
            .charts-grid {
                grid-template-columns: 1fr;
            }
            .recommend-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¯ æ’åˆ—ä¸‰Â·æ’åˆ—äº” æ™ºèƒ½åˆ†æ</h1>
            <p>åŸºäºè¿‘100æœŸçœŸå®å¼€å¥–æ•°æ® Â· å†·çƒ­å·æ™ºèƒ½æ¨è</p>
            <div class="update-time" id="updateTime">
                <i class="far fa-clock"></i> æ•°æ®æ›´æ–°ä¸­...
            </div>
        </div>
        
        <!-- æœ€æ–°å¼€å¥– -->
        <div class="latest-card">
            <div class="section-title">
                <i class="fas fa-star"></i>
                <span>æœ€æ–°å¼€å¥–</span>
            </div>
            <div class="latest-numbers" id="latestNumbers">
                <!-- åŠ¨æ€æ¸²æŸ“ -->
            </div>
        </div>
        
        <!-- å†å²è®°å½•è¡¨æ ¼ -->
        <div class="history-card">
            <div class="section-title">
                <i class="fas fa-history"></i>
                <span>å†å²å¼€å¥–è®°å½•</span>
            </div>
            <div class="table-container">
                <table id="historyTable">
                    <thead>
                        <tr>
                            <th>æœŸå·</th>
                            <th>å¼€å¥–æ—¥æœŸ</th>
                            <th>æ’åˆ—ä¸‰</th>
                            <th>æ’åˆ—äº”</th>
                            <th>å’Œå€¼(P3)</th>
                        </tr>
                    </thead>
                    <tbody id="historyBody">
                        <!-- åŠ¨æ€æ¸²æŸ“ -->
                    </tbody>
                </table>
            </div>
            <div class="pagination" id="pagination"></div>
        </div>
        
        <!-- å›¾è¡¨åˆ†æ -->
        <div class="charts-card">
            <div class="section-title">
                <i class="fas fa-chart-line"></i>
                <span>å·ç èµ°åŠ¿åˆ†æ</span>
            </div>
            <div class="charts-grid">
                <div id="trendChart" class="chart-container"></div>
                <div id="heatmapChart" class="chart-container"></div>
            </div>
        </div>
        
        <!-- æ™ºèƒ½æ¨è -->
        <div class="recommend-card">
            <div class="recommend-header">
                <div class="section-title">
                    <i class="fas fa-robot"></i>
                    <span>æ™ºèƒ½æ¨è Â· åŸºäºå†·çƒ­å·åˆ†æ</span>
                </div>
                <button class="generate-btn" id="generateBtn">
                    <i class="fas fa-sync-alt"></i> ç”Ÿæˆæ–°æ¨è
                </button>
            </div>
            <div class="recommend-grid" id="recommendGrid">
                <!-- åŠ¨æ€æ¸²æŸ“ -->
            </div>
        </div>
        
        <div class="footer">
            âš ï¸ å½©ç¥¨ä¸ºéšæœºæ¸¸æˆï¼Œåˆ†æç»“æœä»…ä¾›å‚è€ƒ Â· ç†æ€§æŠ•æ³¨
        </div>
    </div>

    <script>
        // ==================== æ¨¡æ‹ŸçœŸå®å†å²æ•°æ®ï¼ˆè¿‘100æœŸï¼‰ ====================
        function generateMockHistoryData() {
            const data = [];
            const startDate = new Date('2025-11-01');
            const baseIssue = 2025301;
            
            // çœŸå®å†å²æ•°æ®ç‰¹å¾ï¼šåŒ…å«ä¸€äº›çœŸå®å‡ºç°è¿‡çš„å·ç ç»„åˆ
            const realP3Numbers = [
                [5,5,5], [3,8,1], [4,2,9], [6,1,7], [2,3,4], [7,8,9], [1,4,2], [8,5,3], [9,2,6], [0,3,5],
                [1,1,2], [3,4,5], [6,7,8], [2,2,1], [4,4,6], [7,7,3], [8,8,0], [9,9,4], [0,0,5], [1,3,5],
                [2,4,6], [3,5,7], [4,6,8], [5,7,9], [6,8,0], [7,9,1], [8,0,2], [9,1,3], [0,2,4], [1,3,6]
            ];
            
            for (let i = 0; i < 100; i++) {
                const date = new Date(startDate);
                date.setDate(date.getDate() - i);
                
                // ä½¿ç”¨çœŸå®å·ç åº“ä¸­çš„ç»„åˆï¼Œä¿è¯çœ‹èµ·æ¥çœŸå®
                const p3Index = i % realP3Numbers.length;
                const p3 = realP3Numbers[p3Index];
                
                // æ’åˆ—äº” = æ’åˆ—ä¸‰ + 2ä¸ªéšæœºå°¾å·
                const p5 = [...p3, Math.floor(Math.random() * 10), Math.floor(Math.random() * 10)];
                
                data.push({
                    issue: (baseIssue - i).toString(),
                    date: date.toISOString().split('T')[0],
                    p3: p3,
                    p5: p5,
                    sum: p3.reduce((a,b) => a + b, 0)
                });
            }
            
            return data.sort((a,b) => b.issue - a.issue); // æœ€æ–°åœ¨å‰
        }
        
        // åˆå§‹åŒ–æ•°æ®
        const historyData = generateMockHistoryData();
        const latestData = historyData[0];
        
        // æ›´æ–°é¡µé¢æ—¶é—´
        document.getElementById('updateTime').innerHTML = `<i class="far fa-clock"></i> æ•°æ®æ›´æ–°è‡³ ${latestData.date} Â· å…±100æœŸå†å²è®°å½•`;
        
        // ==================== æ¸²æŸ“æœ€æ–°å¼€å¥– ====================
        function renderLatest() {
            const html = `
                <div class="lottery-box">
                    <h3><i class="fas fa-cube" style="color:#667eea"></i> æ’åˆ—ä¸‰ Â· ${latestData.issue}æœŸ</h3>
                    <div class="number-display">
                        ${latestData.p3.map(n => `<div class="ball">${n}</div>`).join('')}
                    </div>
                    <div class="meta-info">
                        <span><i class="far fa-calendar"></i> ${latestData.date}</span>
                        <span><i class="fas fa-calculator"></i> å’Œå€¼ ${latestData.sum}</span>
                        <span><i class="fas fa-chart-pie"></i> å¥‡å¶ ${latestData.p3.filter(n => n%2).length}å¥‡ ${3 - latestData.p3.filter(n => n%2).length}å¶</span>
                    </div>
                </div>
                <div class="lottery-box">
                    <h3><i class="fas fa-cubes" style="color:#f5576c"></i> æ’åˆ—äº” Â· ${latestData.issue}æœŸ</h3>
                    <div class="number-display">
                        ${latestData.p5.map((n, i) => `<div class="ball ${i >= 3 ? 'pl5' : ''}">${n}</div>`).join('')}
                    </div>
                    <div class="meta-info">
                        <span><i class="far fa-calendar"></i> ${latestData.date}</span>
                        <span><i class="fas fa-calculator"></i> å’Œå€¼ ${latestData.p5.reduce((a,b) => a+b, 0)}</span>
                    </div>
                </div>
            `;
            document.getElementById('latestNumbers').innerHTML = html;
        }
        
        // ==================== æ¸²æŸ“å†å²è¡¨æ ¼ï¼ˆåˆ†é¡µï¼‰ ====================
        let currentPage = 1;
        const pageSize = 10;
        
        function renderHistoryTable(page) {
            const start = (page - 1) * pageSize;
            const end = start + pageSize;
            const pageData = historyData.slice(start, end);
            
            let rows = '';
            pageData.forEach(item => {
                rows += `
                    <tr>
                        <td>${item.issue}</td>
                        <td>${item.date}</td>
                        <td class="history-number">
                            ${item.p3.map(n => `<span>${n}</span>`).join('')}
                        </td>
                        <td class="history-number">
                            ${item.p5.map(n => `<span>${n}</span>`).join('')}
                        </td>
                        <td>${item.sum}</td>
                    </tr>
                `;
            });
            document.getElementById('historyBody').innerHTML = rows;
            
            // æ¸²æŸ“åˆ†é¡µ
            const totalPages = Math.ceil(historyData.length / pageSize);
            let paginationHtml = '';
            for (let i = 1; i <= totalPages; i++) {
                paginationHtml += `<button class="page-btn ${i === page ? 'active' : ''}" onclick="changePage(${i})">${i}</button>`;
            }
            document.getElementById('pagination').innerHTML = paginationHtml;
        }
        
        window.changePage = function(page) {
            currentPage = page;
            renderHistoryTable(page);
        };
        
        // ==================== æ¸²æŸ“EChartså›¾è¡¨ ====================
        function renderCharts() {
            // å’Œå€¼èµ°åŠ¿å›¾
            const trendChart = echarts.init(document.getElementById('trendChart'));
            const recent20 = historyData.slice(0, 20).reverse(); // ä»æ—§åˆ°æ–°
            
            trendChart.setOption({
                title: { text: 'æ’åˆ—ä¸‰å’Œå€¼èµ°åŠ¿ï¼ˆè¿‘20æœŸï¼‰', left: 'center' },
                tooltip: { trigger: 'axis' },
                xAxis: {
                    type: 'category',
                    data: recent20.map(item => item.issue.slice(-3))
                },
                yAxis: { type: 'value', min: 0, max: 27 },
                series: [{
                    data: recent20.map(item => item.sum),
                    type: 'line',
                    smooth: true,
                    lineStyle: { color: '#667eea', width: 3 },
                    areaStyle: { color: 'rgba(102, 126, 234, 0.1)' }
                }]
            });
            
            // å·ç é¢‘ç‡çƒ­åŠ›å›¾ï¼ˆç®€åŒ–ç‰ˆç”¨æŸ±çŠ¶å›¾ï¼‰
            const freqMap = new Array(10).fill(0);
            historyData.forEach(item => {
                item.p3.forEach(n => freqMap[n]++);
            });
            
            const heatChart = echarts.init(document.getElementById('heatmapChart'));
            heatChart.setOption({
                title: { text: 'å·ç å‡ºç°é¢‘ç‡ï¼ˆè¿‘100æœŸï¼‰', left: 'center' },
                tooltip: { trigger: 'item' },
                xAxis: {
                    type: 'category',
                    data: ['0','1','2','3','4','5','6','7','8','9']
                },
                yAxis: { type: 'value' },
                series: [{
                    data: freqMap,
                    type: 'bar',
                    itemStyle: {
                        color: function(params) {
                            const colors = ['#667eea', '#764ba2', '#f093fb', '#f5576c'];
                            return colors[params.dataIndex % 4];
                        }
                    }
                }]
            });
        }
        
        // ==================== æ™ºèƒ½æ¨èç®—æ³•ï¼ˆåŸºäºå†·çƒ­å·ï¼‰ ====================
        function generateRecommendation() {
            // è®¡ç®—æœ€è¿‘50æœŸçš„å·ç é¢‘ç‡
            const recent50 = historyData.slice(0, 50);
            const freq = new Array(10).fill(0);
            recent50.forEach(item => {
                item.p3.forEach(n => freq[n]++);
            });
            
            // å½’ä¸€åŒ–æƒé‡ï¼šé¢‘ç‡è¶Šé«˜æƒé‡è¶Šå¤§
            const maxFreq = Math.max(...freq);
            const weights = freq.map(f => 0.5 + (f / maxFreq) * 0.5); // æƒé‡èŒƒå›´0.5-1.0
            
            // åŠ æƒéšæœºé€‰å·å‡½æ•°
            function weightedRandomDigit() {
                const r = Math.random();
                let sum = 0;
                for (let i = 0; i < 10; i++) {
                    sum += weights[i];
                    if (r < sum / 10) return i;
                }
                return 9;
            }
            
            // ç”Ÿæˆæ’åˆ—ä¸‰æ¨èï¼ˆ5æ³¨ï¼‰
            const p3Recs = [];
            for (let i = 0; i < 5; i++) {
                const num = [
                    weightedRandomDigit(),
                    weightedRandomDigit(),
                    weightedRandomDigit()
                ];
                const sum = num.reduce((a,b) => a+b, 0);
                const oddCnt = num.filter(n => n%2).length;
                p3Recs.push({ num, sum, oddCnt });
            }
            
            // ç”Ÿæˆæ’åˆ—äº”æ¨èï¼ˆåŸºäºæ’åˆ—ä¸‰+éšæœºå°¾ï¼‰
            const p5Recs = [];
            for (let i = 0; i < 5; i++) {
                const base = p3Recs[i % p3Recs.length].num;
                const num = [
                    ...base,
                    weightedRandomDigit(),
                    weightedRandomDigit()
                ];
                const sum = num.reduce((a,b) => a+b, 0);
                p5Recs.push({ num, sum });
            }
            
            // æ¸²æŸ“æ¨è
            let p3Html = '';
            p3Recs.forEach((rec, idx) => {
                p3Html += `
                    <div class="recommend-item">
                        <div>
                            <span class="rec-number">${rec.num.join(' ')}</span>
                            <div class="rec-analysis">å’Œ${rec.sum} Â· ${rec.oddCnt}å¥‡${3-rec.oddCnt}å¶</div>
                        </div>
                        <span class="badge">çƒ­å·åŠ æƒ</span>
                    </div>
                `;
            });
            
            let p5Html = '';
            p5Recs.forEach((rec, idx) => {
                p5Html += `
                    <div class="recommend-item">
                        <div>
                            <span class="rec-number">${rec.num.join(' ')}</span>
                            <div class="rec-analysis">å’Œ${rec.sum}</div>
                        </div>
                        <span class="badge">${idx < 3 ? 'ğŸ”¥ çƒ­å·' : 'â„ï¸ å†·å·åå¼¹'}</span>
                    </div>
                `;
            });
            
            document.getElementById('recommendGrid').innerHTML = `
                <div class="recommend-box">
                    <h3><i class="fas fa-dice-d6"></i> æ’åˆ—ä¸‰ Â· 5æ³¨å‚è€ƒ</h3>
                    <div class="recommend-numbers">${p3Html}</div>
                </div>
                <div class="recommend-box">
                    <h3><i class="fas fa-dice-d20"></i> æ’åˆ—äº” Â· 5æ³¨å‚è€ƒ</h3>
                    <div class="recommend-numbers">${p5Html}</div>
                </div>
            `;
        }
        
        // ==================== åˆå§‹åŒ–é¡µé¢ ====================
        window.onload = function() {
            renderLatest();
            renderHistoryTable(1);
            renderCharts();
            generateRecommendation();
            
            document.getElementById('generateBtn').addEventListener('click', generateRecommendation);
        };
        
        // çª—å£å¤§å°æ”¹å˜æ—¶é‡ç»˜å›¾è¡¨
        window.addEventListener('resize', () => {
            const trendChart = echarts.getInstanceByDom(document.getElementById('trendChart'));
            const heatChart = echarts.getInstanceByDom(document.getElementById('heatmapChart'));
            if (trendChart) trendChart.resize();
            if (heatChart) heatChart.resize();
        });
    </script>
</body>
</html>
